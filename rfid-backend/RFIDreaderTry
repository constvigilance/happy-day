import RPi.GPIO as GPIO  # Import Raspberry Pi GPIO library
from time import sleep  # Import the sleep function from the time module
from mfrc522 import SimpleMFRC522

GPIO.setwarnings(False)  # Ignore warning for now
GPIO.setmode(GPIO.BOARD)  # Use physical pin numbering
GPIO.setup(22, GPIO.OUT, initial=GPIO.LOW)  # Set pin 8 to be an output pin and set initial value to low (off)
GPIO.setup(29, GPIO.OUT, initial=GPIO.LOW)
# GPIO.setup(7, GPIO.OUT, initial=GPIO.LOW)

stage = 0
idA = 0
idB = 0
idC = 0


def send_string(name1, name2, name3):
    print(name1, name2, name3)
    pass


while True:  # Run forever
    if stage == 0:
        GPIO.output(29, GPIO.LOW)
        GPIO.output(22, GPIO.HIGH)
        sleep(0.3)
        readerA = SimpleMFRC522()
        try:
            idA, text = readerA.read()
        finally:
            stage += 1

    if stage == 1:
        GPIO.output(22, GPIO.LOW)
        GPIO.output(29, GPIO.HIGH)
        sleep(0.3)
        readerB = SimpleMFRC522()
        try:
            idB, text = readerB.read()
        finally:
            stage += 1
    if stage == 2:
        send_string(idA, idB, idC)
        sleep(0.3)
        stage = 0
